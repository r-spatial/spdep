<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generate neighbours list for grid cells — cell2nb • spdep</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Generate neighbours list for grid cells — cell2nb" />

<meta property="og:description" content="The function generates a list of neighbours for a grid of cells. Helper
functions are used to convert to and from the vector indices for row and 
column grid positions, and rook (shared edge) or queen (shared edge or 
vertex) neighbour definitions are applied by type. If torus is TRUE, the 
grid is mapped onto a torus, removing edge effects." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spdep</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/CO69.html">“The Problem of Spatial Autocorrelation:” forty years on</a>
    </li>
    <li>
      <a href="../articles/SpatialFiltering.html">Moran Eigenvectors</a>
    </li>
    <li>
      <a href="../articles/nb_igraph.html">Spatial weights objects as sparse matrices and graphs</a>
    </li>
    <li>
      <a href="../articles/nb_sf.html">Creating Neighbours using sf objects</a>
    </li>
    <li>
      <a href="../articles/sids.html">Introduction to the North Carolina SIDS data set (revised)</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-spatial/spdep">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate neighbours list for grid cells</h1>
    
    <div class="hidden name"><code>cell2nb.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>The function generates a list of neighbours for a grid of cells. Helper
functions are used to convert to and from the vector indices for row and 
column grid positions, and rook (shared edge) or queen (shared edge or 
vertex) neighbour definitions are applied by type. If torus is TRUE, the 
grid is mapped onto a torus, removing edge effects.</p>
    
    </div>

    <pre class="usage"><span class='fu'>cell2nb</span>(<span class='no'>nrow</span>, <span class='no'>ncol</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"rook"</span>, <span class='kw'>torus</span><span class='kw'>=</span><span class='fl'>FALSE</span>, <span class='kw'>legacy</span><span class='kw'>=</span><span class='fl'>FALSE</span>)
<span class='fu'>mrc2vi</span>(<span class='no'>rowcol</span>, <span class='no'>nrow</span>, <span class='no'>ncol</span>)
<span class='fu'>rookcell</span>(<span class='no'>rowcol</span>, <span class='no'>nrow</span>, <span class='no'>ncol</span>, <span class='kw'>torus</span><span class='kw'>=</span><span class='fl'>FALSE</span>, <span class='kw'>rmin</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>cmin</span><span class='kw'>=</span><span class='fl'>1</span>)
<span class='fu'>queencell</span>(<span class='no'>rowcol</span>, <span class='no'>nrow</span>, <span class='no'>ncol</span>, <span class='kw'>torus</span><span class='kw'>=</span><span class='fl'>FALSE</span>, <span class='kw'>rmin</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>cmin</span><span class='kw'>=</span><span class='fl'>1</span>)
<span class='fu'>vi2mrc</span>(<span class='no'>i</span>, <span class='no'>nrow</span>, <span class='no'>ncol</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>nrow</th>
      <td><p>number of rows in the grid</p></td>
    </tr>
    <tr>
      <th>ncol</th>
      <td><p>number of columns in the grid</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>rook or queen</p></td>
    </tr>
    <tr>
      <th>torus</th>
      <td><p>map grid onto torus</p></td>
    </tr>
    <tr>
      <th>legacy</th>
      <td><p>default FALSE, nrow/ncol reversed, if TRUE wrong col/row directions (see <a href='https://github.com/r-spatial/spdep/issues/20'>https://github.com/r-spatial/spdep/issues/20</a>)</p></td>
    </tr>
    <tr>
      <th>rowcol</th>
      <td><p>matrix with two columns of row, column indices</p></td>
    </tr>
    <tr>
      <th>i</th>
      <td><p>vector of vector indices corresponding to rowcol</p></td>
    </tr>
    <tr>
      <th>rmin</th>
      <td><p>lowest row index</p></td>
    </tr>
    <tr>
      <th>cmin</th>
      <td><p>lowset column index</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function returns an object of class <code>nb</code> with a list of integer vectors containing neighbour region number ids. See <code><a href='card.html'>card</a></code> for details of &#8220;nb&#8221; objects.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='summary.nb.html'>summary.nb</a></code>, <code><a href='card.html'>card</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>nb7rt</span> <span class='kw'>&lt;-</span> <span class='fu'>cell2nb</span>(<span class='fl'>7</span>, <span class='fl'>7</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/summary'>summary</a></span>(<span class='no'>nb7rt</span>)</div><div class='output co'>#&gt; Neighbour list object:
#&gt; Number of regions: 49 
#&gt; Number of nonzero links: 168 
#&gt; Percentage nonzero weights: 6.997085 
#&gt; Average number of links: 3.428571 
#&gt; Link number distribution:
#&gt; 
#&gt;  2  3  4 
#&gt;  4 20 25 
#&gt; 4 least connected regions:
#&gt; 1:1 7:1 1:7 7:7 with 2 links
#&gt; 25 most connected regions:
#&gt; 2:2 3:2 4:2 5:2 6:2 2:3 3:3 4:3 5:3 6:3 2:4 3:4 4:4 5:4 6:4 2:5 3:5 4:5 5:5 6:5 2:6 3:6 4:6 5:6 6:6 with 4 links</div><div class='input'><span class='no'>xyc</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/attr'>attr</a></span>(<span class='no'>nb7rt</span>, <span class='st'>"region.id"</span>)
<span class='no'>xy</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/matrix'>matrix</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/integer'>as.integer</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/unlist'>unlist</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/strsplit'>strsplit</a></span>(<span class='no'>xyc</span>, <span class='st'>":"</span>))), <span class='kw'>ncol</span><span class='kw'>=</span><span class='fl'>2</span>, <span class='kw'>byrow</span><span class='kw'>=</span><span class='fl'>TRUE</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/plot'>plot</a></span>(<span class='no'>nb7rt</span>, <span class='no'>xy</span>)</div><div class='img'><img src='cell2nb-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='no'>nb7rt</span> <span class='kw'>&lt;-</span> <span class='fu'>cell2nb</span>(<span class='fl'>7</span>, <span class='fl'>7</span>, <span class='kw'>torus</span><span class='kw'>=</span><span class='fl'>TRUE</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/summary'>summary</a></span>(<span class='no'>nb7rt</span>)</div><div class='output co'>#&gt; Neighbour list object:
#&gt; Number of regions: 49 
#&gt; Number of nonzero links: 196 
#&gt; Percentage nonzero weights: 8.163265 
#&gt; Average number of links: 4 
#&gt; Link number distribution:
#&gt; 
#&gt;  4 
#&gt; 49 
#&gt; 49 least connected regions:
#&gt; 1:1 2:1 3:1 4:1 5:1 6:1 7:1 1:2 2:2 3:2 4:2 5:2 6:2 7:2 1:3 2:3 3:3 4:3 5:3 6:3 7:3 1:4 2:4 3:4 4:4 5:4 6:4 7:4 1:5 2:5 3:5 4:5 5:5 6:5 7:5 1:6 2:6 3:6 4:6 5:6 6:6 7:6 1:7 2:7 3:7 4:7 5:7 6:7 7:7 with 4 links
#&gt; 49 most connected regions:
#&gt; 1:1 2:1 3:1 4:1 5:1 6:1 7:1 1:2 2:2 3:2 4:2 5:2 6:2 7:2 1:3 2:3 3:3 4:3 5:3 6:3 7:3 1:4 2:4 3:4 4:4 5:4 6:4 7:4 1:5 2:5 3:5 4:5 5:5 6:5 7:5 1:6 2:6 3:6 4:6 5:6 6:6 7:6 1:7 2:7 3:7 4:7 5:7 6:7 7:7 with 4 links</div><div class='input'><span class='co'># https://github.com/r-spatial/spdep/issues/20</span>
<span class='no'>GT</span> <span class='kw'>&lt;-</span> <span class='fu'>GridTopology</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>1</span>, <span class='fl'>1</span>), <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>1</span>,<span class='fl'>1</span>), <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='fl'>10</span>, <span class='fl'>50</span>))
<span class='no'>SPix</span> <span class='kw'>&lt;-</span> <span class='fu'>as</span>(<span class='fu'>SpatialGrid</span>(<span class='no'>GT</span>), <span class='st'>"SpatialPixels"</span>)
<span class='no'>nb_rook_cont</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='poly2nb.html'>poly2nb</a></span>(<span class='fu'>as</span>(<span class='no'>SPix</span>, <span class='st'>"SpatialPolygons"</span>), <span class='kw'>queen</span><span class='kw'>=</span><span class='fl'>FALSE</span>)
<span class='no'>nb_rook_dist</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='dnearneigh.html'>dnearneigh</a></span>(<span class='fu'>coordinates</span>(<span class='no'>SPix</span>), <span class='fl'>0</span>, <span class='fl'>1.01</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/all.equal'>all.equal</a></span>(<span class='no'>nb_rook_cont</span>, <span class='no'>nb_rook_dist</span>, <span class='kw'>check.attributes</span><span class='kw'>=</span><span class='fl'>FALSE</span>)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'><span class='co'>## [1] TRUE</span>
<span class='no'>t.nb</span> <span class='kw'>&lt;-</span> <span class='fu'>cell2nb</span>(<span class='kw'>nrow</span><span class='kw'>=</span><span class='fl'>50</span>, <span class='kw'>ncol</span><span class='kw'>=</span><span class='fl'>10</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>'rook'</span>, <span class='kw'>legacy</span><span class='kw'>=</span><span class='fl'>TRUE</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Logic'>isTRUE</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/all.equal'>all.equal</a></span>(<span class='no'>nb_rook_cont</span>, <span class='no'>t.nb</span>, <span class='kw'>check.attributes</span><span class='kw'>=</span><span class='fl'>FALSE</span>))</div><div class='output co'>#&gt; [1] FALSE</div><div class='input'><span class='co'>## [1] FALSE</span>
<span class='no'>t.nb</span> <span class='kw'>&lt;-</span> <span class='fu'>cell2nb</span>(<span class='kw'>nrow</span><span class='kw'>=</span><span class='fl'>50</span>, <span class='kw'>ncol</span><span class='kw'>=</span><span class='fl'>10</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>'rook'</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Logic'>isTRUE</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/all.equal'>all.equal</a></span>(<span class='no'>nb_rook_cont</span>, <span class='no'>t.nb</span>, <span class='kw'>check.attributes</span><span class='kw'>=</span><span class='fl'>FALSE</span>))</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>## [1] TRUE
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Roger Bivand <a href='mailto:Roger.Bivand@nhh.no'>Roger.Bivand@nhh.no</a></p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Roger Bivand.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

